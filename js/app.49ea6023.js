(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)r=o[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0502":function(t,e,n){},"082a":function(t,e,n){"use strict";n("92d2")},"0f19":function(t,e,n){t.exports={"self-fill-f":"loading-module_self-fill-f_2dp8Z",loading:"loading-module_loading_1G_9Z"}},1e3:function(t,e,n){"use strict";n("cbf7")},"123f":function(t,e,n){},1743:function(t,e,n){},"17bc":function(t,e,n){"use strict";n("75c4")},"1cb1":function(t,e,n){"use strict";n("3bc3")},"1d2e":function(t,e,n){"use strict";n("e6cf")},"1ffe":function(t,e,n){"use strict";n("b539")},"244c":function(t,e,n){"use strict";n("123f")},"2c5f":function(t,e,n){},"324e":function(t,e,n){},"391e":function(t,e,n){},"3bc3":function(t,e,n){},"42ce":function(t,e,n){"use strict";n("1743")},"46c1":function(t,e,n){},"4e43":function(t,e,n){"use strict";n("9170")},5229:function(t,e,n){"use strict";n("86ef")},"53cd":function(t,e,n){"use strict";n("e0c1")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cfa"),n("cca6"),n("a79d"),n("99af");var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{staticClass:"iconfont",class:t.icon})},i=[],s={home:"icon-home",arrowUp:"icon-shangjiantou",warn:"icon-jinggao",blog:"icon-blog",message:"icon-liuyan",information:"icon-xinxiinformation38",wechat:"icon-weixin",email:"icon-185078emailmailstreamline",project:"icon-xiangmu",skill:"icon-jineng",ok:"icon-Group-",qq:"icon-qq",album:"icon-xiangce",empty:"icon-empty",arrowDown:"icon-xiajiantou",introduction:"icon-jianjie",code:"icon-code",link:"icon-lianjie",wrong:"icon-cuowu",about:"icon-14guanyu3x",close:"icon-guanbi",github:"icon-GitHub"},r={props:{type:{type:String,required:!0}},computed:{icon:function(){return s[this.type]}}},o=r,c=(n("e0c4"),n("2877")),l=Object(c["a"])(o,a,i,!1,null,null,null),u=l.exports,p=n("2b0e");function d(t,e){var n=new p["a"]({render:function(n){return n(t,{props:e})}});return n.$mount(),n.$el}var h=d,m=n("dd53"),g=n.n(m);function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.content||"",n=t.type||"info",a=t.duration||2e3,i=t.container||document.body,s=t.calllback;t.container&&"static"===getComputedStyle(i).position&&(i.style.position="relative");var r=document.createElement("div"),o=h(u,{type:n}),c=g.a["message-".concat(n)];r.className="".concat(g.a.message," ").concat(c),r.innerHTML="<span class=".concat(g.a.icon,">").concat(o.outerHTML,"</span> <span>").concat(e,"</span>"),i.appendChild(r),console.log(r.clientHeight),r.style.opacity=1,r.style.transform="translate(-50%,-50%)",setTimeout((function(){r.style.opacity=1,r.style.transform="translate(-50%,-50%) translateY(-20px)",r.addEventListener("transitionend",(function(){r.remove(),s&&s()}),{once:!0})}),a)}var v=f,b=n("96eb"),y=n.n(b);y.a.mock("/api/banners","get",{code:0,msg:"",data:[{id:"1",title:"凛冬将至",midImg:"https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3892213543,627454058&fm=26&gp=0.jpg",bigImg:"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3326826353,2010856929&fm=26&gp=0.jpg",desc:"勇敢远行，在我们未老之前"},{id:"2",title:"厚积薄发",midImg:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2631470217,4191099824&fm=26&gp=0.jpg",bigImg:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1641182576,4243080527&fm=26&gp=0.jpg",desc:"心安即是净土"},{id:"3",title:"果断杀伐",midImg:"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=923453237,3613675671&fm=26&gp=0.jpg",bigImg:"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=4074726422,1723012546&fm=26&gp=0.jpg",desc:"成功只是一种选择"}]});var _=n("ade3"),w=n("b383"),x=n.n(w);y.a.mock("/api/blogtype","get",{code:0,msg:"","data|50-70":[{"id|+1":1,name:"分类@id","articleCount|0-20":10}]}),y.a.mock(/^\/api\/blog(\?.+)?$/,"get",(function(t){var e=x.a.parse(t.url);return y.a.mock({code:0,msg:"",data:Object(_["a"])({"total|200-300":0},"rows|".concat(e.limit||10),[{id:"@guid",title:"@ctitle",desc:"@cparagraph(1, 5)",category:{"id|1-10":0,name:"分类@id"},"scanNumber|10-200":0,"commentNumber|0-20":0,"thumb|1":[" @image(180x150, @color,@color, @name)"],createTime:"@date(T)"}])})})),y.a.mock(/^\/api\/blog\/[^/]+$/,"get",{code:0,msg:"",data:{id:"@guid",title:"@ctitle",category:{"cid|1-10":1,name:"分类@cid"},"scanNumber|0-1000":0,"commentNumber|0-100":0,description:"@cparagraph(1,10)",createDate:"@date(T)",toc:[{name:"概述",anchor:"article-md-title-1"},{name:"简单请求",anchor:"article-md-title-2",children:[{name:"简单请求的判定",anchor:"article-md-title-3"},{name:"简单请求的交互规范",anchor:"article-md-title-4"}]},{name:"需要预检的请求",anchor:"article-md-title-5"},{name:"附带身份凭证的请求",anchor:"article-md-title-6"},{name:"一个额外的补充",anchor:"article-md-title-7"}],htmlContent:'<blockquote>\n    <p>阅读本文，你需要首先知道：</p><ol>\n    <li>浏览器的同源策略</li>\n    <li>跨域问题</li>\n    <li>JSONP原理</li>\n    <li>cookie原理</li>\n    </ol>\n    </blockquote>\n    <p>JSONP并不是一个好的跨域解决方案，它至少有着下面两个严重问题：</p><ol>\n    <li><strong>会打乱服务器的消息格式</strong>：JSONP要求服务器响应一段JS代码，但在非跨域的情况下，服务器又需要响应一个正常的JSON格式</li>\n    <li><strong>只能完成GET请求</strong>：JSONP的原理会要求浏览器端生成一个<code>script</code>元素，而<code>script</code>元素发出的请求只能是<code>get</code>请求</li>\n    </ol>\n    <p>所以，CORS是一种更好的跨域解决方案。</p><h1 id="article-md-title-1">概述</h1><p><code>CORS</code>是基于<code>http1.1</code>的一种跨域解决方案，它的全称是<strong>C</strong>ross-<strong>O</strong>rigin <strong>R</strong>esource <strong>S</strong>haring，跨域资源共享。</p><p>它的总体思路是：<strong>如果浏览器要跨域访问服务器的资源，需要获得服务器的允许</strong></p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421152122793.png" title="image-20200421152122793" alt="image-20200421152122793">\n          <figcaption>image-20200421152122793</figcaption>\n      \n        </figure><p>而要知道，一个请求可以附带很多信息，从而会对服务器造成不同程度的影响</p><p>比如有的请求只是获取一些新闻，有的请求会改动服务器的数据</p><p>针对不同的请求，CORS规定了三种不同的交互模式，分别是：</p><ul>\n    <li><strong>简单请求</strong></li>\n    <li><strong>需要预检的请求</strong></li>\n    <li><strong>附带身份凭证的请求</strong></li>\n    </ul>\n    <p>这三种模式从上到下层层递进，请求可以做的事越来越多，要求也越来越严格。</p><p>下面分别说明三种请求模式的具体规范。</p><h1 id="article-md-title-2">简单请求</h1><p>当浏览器端运行了一段ajax代码（无论是使用XMLHttpRequest还是fetch api），浏览器会首先判断它属于哪一种请求模式</p><h2 id="article-md-title-3">简单请求的判定</h2><p>当请求<strong>同时满足</strong>以下条件时，浏览器会认为它是一个简单请求：</p><ol>\n    <li><p><strong>请求方法属于下面的一种：</strong></p><ul>\n    <li>get</li>\n    <li>post</li>\n    <li>head</li>\n    </ul>\n    </li>\n    <li><p><strong>请求头仅包含安全的字段，常见的安全字段如下：</strong></p><ul>\n    <li><code>Accept</code></li>\n    <li><code>Accept-Language</code></li>\n    <li><code>Content-Language</code></li>\n    <li><code>Content-Type</code></li>\n    <li><code>DPR</code></li>\n    <li><code>Downlink</code></li>\n    <li><code>Save-Data</code></li>\n    <li><code>Viewport-Width</code></li>\n    <li><code>Width</code></li>\n    </ul>\n    </li>\n    <li><p><strong>请求头如果包含<code>Content-Type</code>，仅限下面的值之一：</strong></p><ul>\n    <li><code>text/plain</code></li>\n    <li><code>multipart/form-data</code></li>\n    <li><code>application/x-www-form-urlencoded</code></li>\n    </ul>\n    </li>\n    </ol>\n    <p>如果以上三个条件同时满足，浏览器判定为简单请求。</p><p>下面是一些例子：</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);\n    \n    <span class="hljs-comment">// 请求方法不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"PUT"</span>\n    })\n    \n    <span class="hljs-comment">// 加入了额外的请求头，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">headers</span>:{\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>\n      }\n    })\n    \n    <span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>\n    })\n    \n    <span class="hljs-comment">// content-type不满足要求，不是简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>, {\n      <span class="hljs-attr">method</span>: <span class="hljs-string">"post"</span>,\n      <span class="hljs-attr">headers</span>: {\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      }\n    })</code></pre>\n    <h2 id="article-md-title-4">简单请求的交互规范</h2><p>当浏览器判定某个<strong>ajax跨域请求</strong>是<strong>简单请求</strong>时，会发生以下的事情</p><ol>\n    <li><strong>请求头中会自动添加<code>Origin</code>字段</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 简单请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/news"</span>);</code></pre>\n    <p>请求发出后，请求头会是下面的格式：</p><pre><code>GET /api/news/ HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com</code></pre><p>看到最后一行没，<code>Origin</code>字段会告诉服务器，是哪个源地址在跨域请求</p><ol start="2">\n    <li><strong>服务器响应头中应包含<code>Access-Control-Allow-Origin</code></strong></li>\n    </ol>\n    <p>当服务器收到请求后，如果允许该请求跨域访问，需要在响应头中添加<code>Access-Control-Allow-Origin</code>字段</p><p>该字段的值可以是：</p><ul>\n    <li>*：表示我很开放，什么人我都允许访问</li>\n    <li>具体的源：比如<code>http://my.com</code>，表示我就允许你访问</li>\n    </ul>\n    <blockquote>\n    <p>实际上，这两个值对于客户端<code>http://my.com</code>而言，都一样，因为客户端才不会管其他源服务器允不允许，就关心自己是否被允许</p><p>当然，服务器也可以维护一个可被允许的源列表，如果请求的<code>Origin</code>命中该列表，才响应<code>*</code>或具体的源</p><p><strong>为了避免后续的麻烦，强烈推荐响应具体的源</strong></p></blockquote>\n    <p>假设服务器做出了以下的响应：</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    消息体中的数据</code></pre><p>当浏览器看到服务器允许自己访问后，高兴的像一个两百斤的孩子，于是，它就把响应顺利的交给js，以完成后续的操作</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421162846480.png" title="image-20200421162846480" alt="image-20200421162846480">\n          <figcaption>image-20200421162846480</figcaption>\n      \n        </figure><h1 id="article-md-title-5">需要预检的请求</h1><p>简单的请求对服务器的威胁不大，所以允许使用上述的简单交互即可完成。</p><p>但是，如果浏览器不认为这是一种简单请求，就会按照下面的流程进行：</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    <li><strong>服务器允许</strong></li>\n    <li><strong>浏览器发送真实请求</strong></li>\n    <li><strong>服务器完成真实的响应</strong></li>\n    </ol>\n    <p>比如，在页面<code>http://my.com/index.html</code>中有以下代码造成了跨域</p><pre><code class="language-js"><span class="hljs-comment">// 需要预检的请求</span>\n    fetch(<span class="hljs-string">"http://crossdomain.com/api/user"</span>, {\n      <span class="hljs-attr">method</span>:<span class="hljs-string">"POST"</span>, <span class="hljs-comment">// post 请求</span>\n      <span class="hljs-attr">headers</span>:{  <span class="hljs-comment">// 设置请求头</span>\n        <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,\n        <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>,\n        <span class="hljs-string">"content-type"</span>: <span class="hljs-string">"application/json"</span>\n      },\n      <span class="hljs-attr">body</span>: <span class="hljs-built_in">JSON</span>.stringify({ <span class="hljs-attr">name</span>: <span class="hljs-string">"袁小进"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }) <span class="hljs-comment">// 设置请求体</span>\n    });</code></pre>\n    <p>浏览器发现它不是一个简单请求，则会按照下面的流程与服务器交互</p><ol>\n    <li><strong>浏览器发送预检请求，询问服务器是否允许</strong></li>\n    </ol>\n    <pre><code>OPTIONS /api/user HTTP/1.1\n    Host: crossdomain.com\n    ...\n    Origin: http://my.com\n    Access-Control-Request-Method: POST\n    Access-Control-Request-Headers: a, b, content-type</code></pre><p>可以看出，这并非我们想要发出的真实请求，请求中不包含我们的响应头，也没有消息体。</p><p>这是一个预检请求，它的目的是询问服务器，是否允许后续的真实请求。</p><p>预检请求<strong>没有请求体</strong>，它包含了后续真实请求要做的事情</p><p>预检请求有以下特征：</p><ul>\n    <li>请求方法为<code>OPTIONS</code></li>\n    <li>没有请求体</li>\n    <li>请求头中包含<ul>\n    <li><code>Origin</code>：请求的源，和简单请求的含义一致</li>\n    <li><code>Access-Control-Request-Method</code>：后续的真实请求将使用的请求方法</li>\n    <li><code>Access-Control-Request-Headers</code>：后续的真实请求会改动的请求头</li>\n    </ul>\n    </li>\n    </ul>\n    <ol start="2">\n    <li><strong>服务器允许</strong></li>\n    </ol>\n    <p>服务器收到预检请求后，可以检查预检请求中包含的信息，如果允许这样的请求，需要响应下面的消息格式</p><pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    Access-Control-Allow-Methods: POST\n    Access-Control-Allow-Headers: a, b, content-type\n    Access-Control-Max-Age: 86400\n    ...</code></pre><p>对于预检请求，不需要响应任何的消息体，只需要在响应头中添加：</p><ul>\n    <li><code>Access-Control-Allow-Origin</code>：和简单请求一样，表示允许的源</li>\n    <li><code>Access-Control-Allow-Methods</code>：表示允许的后续真实的请求方法</li>\n    <li><code>Access-Control-Allow-Headers</code>：表示允许改动的请求头</li>\n    <li><code>Access-Control-Max-Age</code>：告诉浏览器，多少秒内，对于同样的请求源、方法、头，都不需要再发送预检请求了</li>\n    </ul>\n    <ol start="3">\n    <li><strong>浏览器发送真实请求</strong></li>\n    </ol>\n    <p>预检被服务器允许后，浏览器就会发送真实请求了，上面的代码会发生下面的请求数据</p><pre><code>POST /api/user HTTP/1.1\n    Host: crossdomain.com\n    Connection: keep-alive\n    ...\n    Referer: http://my.com/index.html\n    Origin: http://my.com\n    \n    {"name": "袁小进", "age": 18 }</code></pre><ol start="4">\n    <li><strong>服务器响应真实请求</strong></li>\n    </ol>\n    <pre><code>HTTP/1.1 200 OK\n    Date: Tue, 21 Apr 2020 08:03:35 GMT\n    ...\n    Access-Control-Allow-Origin: http://my.com\n    ...\n    \n    添加用户成功</code></pre><p>可以看出，当完成预检之后，后续的处理与简单请求相同</p><p>下图简述了整个交互过程</p><figure class="markdown-image">\n          \n          <img style="width:auto" src="http://mdrs.yuanjin.tech/img/image-20200421165913320.png" title="image-20200421165913320" alt="image-20200421165913320">\n          <figcaption>image-20200421165913320</figcaption>\n      \n        </figure><h1 id="article-md-title-6">附带身份凭证的请求</h1><p>默认情况下，ajax的跨域请求并不会附带cookie，这样一来，某些需要权限的操作就无法进行</p><p>不过可以通过简单的配置就可以实现附带cookie</p><pre><code class="language-js"><span class="hljs-comment">// xhr</span>\n    <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();\n    xhr.withCredentials = <span class="hljs-literal">true</span>;\n    \n    <span class="hljs-comment">// fetch api</span>\n    fetch(url, {\n      <span class="hljs-attr">credentials</span>: <span class="hljs-string">"include"</span>\n    })</code></pre>\n    <p>这样一来，该跨域的ajax请求就是一个<em>附带身份凭证的请求</em></p><p>当一个请求需要附带cookie时，无论它是简单请求，还是预检请求，都会在请求头中添加<code>cookie</code>字段</p><p>而服务器响应时，需要明确告知客户端：服务器允许这样的凭据</p><p>告知的方式也非常的简单，只需要在响应头中添加：<code>Access-Control-Allow-Credentials: true</code>即可</p><p>对于一个附带身份凭证的请求，若服务器没有明确告知，浏览器仍然视为跨域被拒绝。</p><p>另外要特别注意的是：<strong>对于附带身份凭证的请求，服务器不得设置 <code>Access-Control-Allow-Origin 的值为*</code></strong>。这就是为什么不推荐使用*的原因</p><h1 id="article-md-title-7">一个额外的补充</h1><p>在跨域访问时，JS只能拿到一些最基本的响应头，如：Cache-Control、Content-Language、Content-Type、Expires、Last-Modified、Pragma，如果要访问其他头，则需要服务器设置本响应头。</p><p><code>Access-Control-Expose-Headers</code>头让服务器把允许浏览器访问的头放入白名单，例如：</p><pre><code>Access-Control-Expose-Headers: authorization, a, b</code></pre><p>这样JS就能够访问指定的响应头了。</p>'}}),y.a.mock("/api/comment","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}}),y.a.mock(/^\/api\/comment\/?(\?.+)?$/,"get",(function(t){var e=x.a.parse(t.url);return y.a.mock({code:0,msg:"",data:Object(_["a"])({"total|50-200":0},"rows|".concat(e.limit||10),[{id:"@guid",nickname:"@cname",content:"@cparagraph(1, 10)",createDate:Date.now(),"avatar|1":["https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar6.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar4.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar8.jpg","https://qiheizhiya.oss-cn-shenzhen.aliyuncs.com/image/avatar2.jpg"]}])})})),y.a.mock("/api/message","post",{code:0,msg:"",data:{id:"@guid",nickname:"@cname",content:"@cparagraph(2,6)",createDate:Date.now(),"avatar|1":["https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1737125965,2502428800&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3671775094,1585370499&fm=26&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3500505880,2803291589&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3074753048,418723513&fm=26&gp=0.jpg"]}}),y.a.mock(/\/api\/message\/?(\?.+)?$/,"get",(function(t){var e=x.a.parse(t.url);return y.a.mock({code:0,msg:"",data:Object(_["a"])({total:20},"rows|".concat(e.limit||10),[{nickname:"@cname",id:"@guid",content:"@cparagraph(1,10)",createDate:Date.now(),"avatar|1":["https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1737125965,2502428800&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3671775094,1585370499&fm=26&gp=0.jpg","https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=3500505880,2803291589&fm=26&gp=0.jpg","https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=3074753048,418723513&fm=26&gp=0.jpg"]}])})})),y.a.setup({timeout:"1230-3330"});var j=new p["a"]({});p["a"].prototype.$bus=j;var C=j,k=n("b055"),S=n.n(k),$=n("0f19"),O=n.n($);function L(t){return t.querySelector("img[data-role= loading]")}function T(t){var e=document.createElement("img");e.dataset.role="loading",e.src=S.a,e.className=O.a.loading,t.appendChild(e)}var I=function(t,e){L(t)?e.value||L(t).remove():e.value&&T(t)},D=n("b85c"),R=(n("4de4"),function(t,e){var n=null;return function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){t.apply(void 0,i)}),e)}}),H=n("915e"),A=n.n(H),E=[];function P(){var t,e=Object(D["a"])(E);try{var n=function(){var e=t.value,n=e.dom.getBoundingClientRect();e.dom.src=A.a,n.top>-140&&n.top<document.documentElement.clientHeight&&(e.dom.src=e.src,E=E.filter((function(t){return t!==e})))};for(e.s();!(t=e.n()).done;)n()}catch(a){e.e(a)}finally{e.f()}}C.$on("listScroll",R(P,100));var N={inserted:function(t,e){E.push({dom:t,src:e.value}),P()},unbind:function(t){E=E.filter((function(e){return e!==t}))}},M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Lyout",{scopedSlots:t._u([{key:"left",fn:function(){return[n("div",{staticClass:"left-content"},[n("SiteAside")],1)]},proxy:!0}])},[[n("div",{staticClass:"main-content"},[n("RouterView")],1)]],2),n("ToTop")],1)},B=[],z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"to-top-container",on:{click:t.handle}},[t._v(" Top ")])},q=[],F={data:function(){return{isShow:!1}},created:function(){this.$bus.$on("mainscroll",R(this.handleTop,100))},destroyed:function(){this.$bus.$off("mainscroll",R(this.handleTop,100))},methods:{handleTop:function(t){t&&t.scrollTop>=3e3?this.isShow=!0:this.isShow=!1},handle:function(){this.$bus.$emit("changescroll",0)}}},W=F,G=(n("082a"),Object(c["a"])(W,z,q,!1,null,"46d714e1",null)),Y=G.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lyout-container"},[n("div",{staticClass:"left-box"},[t._t("left")],2),n("div",{staticClass:"main-box"},[t._t("default")],2),n("div",{staticClass:"right-box"},[t._t("right")],2)])},Q=[],J={},X=J,V=(n("17bc"),Object(c["a"])(X,K,Q,!1,null,"b1d09c2a",null)),U=V.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"site-aside"},[n("Avatar",{attrs:{url:"https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=2437976801,818193280&fm=26&gp=0.jpg"}}),n("H1",{staticClass:"title"},[t._v("骑士")]),n("Menu"),n("Contact"),n("p",[t._v("粤ICP备00000000号")])],1)},tt=[],et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar-container"},[n("img",{style:{width:t.size+"px",height:t.size+"px"},attrs:{src:t.url}})])},nt=[],at=(n("a9e3"),{props:{url:{type:String,required:!0},size:{type:Number,default:100}}}),it=at,st=(n("810d"),Object(c["a"])(it,et,nt,!1,null,"39ba3ca3",null)),rt=st.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"menu-container"},t._l(t.list,(function(e){return n("li",{key:e.title,attrs:{exact:e.exact}},[n("RouterLink",{attrs:{"active-class":"active",to:{name:e.name},exact:e.exact}},[n("div",{staticClass:"icon"},[n("Icon",{attrs:{type:e.icon}})],1),n("span",[t._v(t._s(e.title))])])],1)})),0)},ct=[],lt={components:{Icon:u},data:function(){return{list:[{title:"首页",path:"/",icon:"home",name:"Home",exact:!0},{title:"文章",path:"/blog",icon:"blog",name:"Blog",exact:!1},{title:"关于我",path:"/about",icon:"about",name:"About",exact:!0},{title:"项目&效果",path:"/project",icon:"project",name:"Project",exact:!0},{title:"留言板",path:"/message",icon:"message",name:"Message",exact:!0}]}},methods:{isActive:function(t){return window.location.pathname===t}}},ut=lt,pt=(n("9ecd"),Object(c["a"])(ut,ot,ct,!1,null,"179baac4",null)),dt=pt.exports,ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"contact-container"},[n("li",[n("a",{attrs:{href:"https://github.com/zhangninggege"}},[n("div",{staticClass:"icon"},[n("Icon",{attrs:{type:"github"}})],1),n("span",[t._v("zhangninggege")])]),t._m(0)]),n("li",[n("a",{attrs:{href:"mailto:648296598@qq.com"}},[n("div",{staticClass:"icon"},[n("Icon",{attrs:{type:"email"}})],1),n("span",[t._v("648296598@qq.com")])]),t._m(1)]),n("li",[n("a",{attrs:{href:"tencent://message/?Menu=yes&uin=648296598&Service=300&sigT=45a1e5847943b64c6ff3990f8a9e644d2b31356cb0b4ac6b24663a3c8dd0f8aa12a595b1714f9d45"}},[n("div",{staticClass:"icon"},[n("Icon",{attrs:{type:"qq"}})],1),n("span",[t._v("648296598")])]),t._m(2)]),n("li",[n("a",[n("div",{staticClass:"icon"},[n("Icon",{attrs:{type:"wechat"}})],1),n("span",[t._v("znqs111")])]),t._m(3)])])},mt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("img",{attrs:{src:n("e660"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("img",{attrs:{src:n("e660"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("img",{attrs:{src:n("e660"),alt:""}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"img"},[a("img",{attrs:{src:n("e660"),alt:""}})])}],gt={components:{Icon:u}},ft=gt,vt=(n("b873"),Object(c["a"])(ft,ht,mt,!1,null,"3e75dd2b",null)),bt=vt.exports,yt={components:{Avatar:rt,Menu:dt,Contact:bt}},_t=yt,wt=(n("97cf"),Object(c["a"])(_t,Z,tt,!1,null,"564ce036",null)),xt=wt.exports,jt={data:function(){return{}},components:{Lyout:U,SiteAside:xt,ToTop:Y},methods:{}},Ct=jt,kt=(n("42ce"),Object(c["a"])(Ct,M,B,!1,null,"18a14fd4",null)),St=kt.exports,$t=n("8c4f"),Ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"container",staticClass:"home-container",on:{wheel:t.scoll}},[n("ul",{staticClass:"carousel-container",style:{marginTop:t.marginTop},on:{transitionend:t.transitioned}},t._l(t.data,(function(t){return n("li",{key:t.id,staticClass:"image-box"},[n("BannerItem",{attrs:{item:t}})],1)})),0),n("Icon",{directives:[{name:"show",rawName:"v-show",value:0!==t.index,expression:"index!== 0"}],staticClass:"arrow-up",attrs:{type:"arrowUp"},nativeOn:{click:function(e){return t.changeIndex(t.index-1)}}}),n("Icon",{directives:[{name:"show",rawName:"v-show",value:t.index!==t.data.length-1,expression:"index !==  data.length -1"}],staticClass:"arrow-down",attrs:{type:"arrowDown"},nativeOn:{click:function(e){return t.changeIndex(t.index+1)}}}),n("ul",{staticClass:"dot-container"},t._l(t.data,(function(e,a){return n("li",{key:e.id,staticClass:"dot",class:{active:t.index===a},on:{click:function(e){return t.changeIndex(a)}}})})),0)],1)},Lt=[],Tt=n("1da1"),It=(n("96cf"),n("bc3a")),Dt=n.n(It),Rt=Dt.a.create();Rt.interceptors.response.use((function(t){return 0===t.data.code?t.data.data:(v({type:"error",content:t.data.msg}),null)}));var Ht=Rt;function At(){return Et.apply(this,arguments)}function Et(){return Et=Object(Tt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.get("/api/banners");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),Et.apply(this,arguments)}var Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{data:function(){return{data:t,isLoading:!0}},created:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchData();case 2:t.data=e.sent,t.isLoading=!1;case 4:case"end":return e.stop()}}),e)})))()}}},Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"bannerBox",staticClass:"banner-item-container",on:{mousemove:t.moveTo,mouseleave:t.moveLeave}},[n("div",{ref:"banner",staticClass:"carousel-img"},[n("ImageLoader",{attrs:{src:t.item.bigImg,placeholder:t.item.midImg},on:{loaded:t.loaded}})],1),n("div",{ref:"title",staticClass:"title"},[t._v(t._s(t.item.title))]),n("div",{ref:"desc",staticClass:"desc"},[t._v(t._s(t.item.desc))])])},Mt=[],Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"image-loader-container"},[t.isEverydone?t._e():n("img",{staticClass:"placeholder",attrs:{src:t.placeholder,alt:""}}),n("img",{style:{opacity:t.originOpcity,transition:t.duration+"ms"},attrs:{src:t.src,alt:""},on:{load:t.handle}})])},zt=[],qt={props:{src:{type:String,required:!0},placeholder:{type:String,required:!0},duration:{type:Number,default:500}},data:function(){return{originIsLoaded:!1,isEverydone:!1}},computed:{originOpcity:function(){return this.originIsLoaded?1:0}},methods:{handle:function(){var t=this;this.originIsLoaded=!0,setTimeout((function(){t.isEverydone=!0,t.$emit("loaded")}),this.duration)}}},Ft=qt,Wt=(n("98b7"),Object(c["a"])(Ft,Bt,zt,!1,null,"86f71e6e",null)),Gt=Wt.exports,Yt={props:{item:{type:Object,required:!0}},components:{ImageLoader:Gt},computed:{widthPro:function(){return(this.bannerSize.width-this.bannerBoxSize.width)/this.bannerBoxSize.width},heightPro:function(){return(this.bannerSize.height-this.bannerBoxSize.height)/this.bannerBoxSize.height}},data:function(){return{titleWidth:0,descWidth:0,bannerSize:{width:0,height:0},bannerBoxSize:{width:0,height:0}}},mounted:function(){this.titleWidth=this.$refs.title.clientWidth,this.descWidth=this.$refs.desc.clientWidth,this.getBannerSize(),this.getBannerBoxSize(),this.moveLeave()},methods:{loaded:function(){this.textAnima(this.$refs.title,this.titleWidth,"1s"),this.textAnima(this.$refs.desc,this.descWidth,"2s")},textAnima:function(t,e,n){t.style.width=0,t.style.opacity=1,t.clientWidth,t.style.transition=n,t.style.width="".concat(e,"px")},getBannerSize:function(){this.bannerSize={width:this.$refs.banner.clientWidth,height:this.$refs.banner.clientHeight}},getBannerBoxSize:function(){this.bannerBoxSize={width:this.$refs.bannerBox.clientWidth,height:this.$refs.bannerBox.clientHeight}},moveTo:function(t){this.$refs.banner.style.top="".concat(-(t.clientY-this.$refs.bannerBox.getBoundingClientRect().top)*this.heightPro,"px"),this.$refs.banner.style.left="".concat(-(t.clientX-this.$refs.bannerBox.getBoundingClientRect().left)*this.widthPro,"px")},moveLeave:function(){this.$refs.banner.style.top="".concat(-this.bannerBoxSize.height/2*this.heightPro,"px"),this.$refs.banner.style.left="".concat(-this.bannerBoxSize.width/2*this.widthPro,"px")}}},Kt=Yt,Qt=(n("9865"),Object(c["a"])(Kt,Nt,Mt,!1,null,"7afbfe11",null)),Jt=Qt.exports,Xt={mixins:[Pt([])],components:{BannerItem:Jt,Icon:u},data:function(){return{index:0,viewHeight:0,isScoll:!1}},methods:{changeIndex:function(t){this.index=t},scoll:function(t){return t.deltaY>25&&this.index<this.data.length-1&&!this.isScoll?(this.index+=1,this.isScoll=!0,!0):t.deltaY<-25&&this.index>0&&!this.isScoll&&(this.index-=1,this.isScoll=!0,!0)},transitioned:function(){this.isScoll=!1},getViewHeight:function(){this.viewHeight=this.$refs.container.clientHeight},fetchData:function(){return Object(Tt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,At();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()}},computed:{marginTop:function(){return"".concat(-this.index*this.viewHeight,"px")}},mounted:function(){this.getViewHeight(),window.addEventListener("resize",this.getViewHeight)},destroyed:function(){window.removeEventListener("resize",this.getViewHeight)}},Vt=Xt,Ut=(n("244c"),Object(c["a"])(Vt,Ot,Lt,!1,null,"d613f380",null)),Zt=Ut.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog-container"},[n("Lyout",{scopedSlots:t._u([{key:"right",fn:function(){return[n("div",{staticClass:"right"},[n("ListRight")],1)]},proxy:!0}])},[n("div",{staticClass:"main"},[n("BlogList")],1)])],1)},ee=[],ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"list-right-container"},[n("span",{staticClass:"title"},[t._v("文章分类")]),t._l(t.datas,(function(e){return n("li",{key:e.id,staticClass:"list-item",class:{selected:e.select},on:{click:function(n){return t.handle(e)}}},[n("span",{staticClass:"classify"},[t._v(t._s(e.name))]),n("span",{staticClass:"total"},[t._v(t._s(e.articleCount))])])}))],2)},ae=[],ie=n("5530"),se=n("2909");n("d81d");function re(){return oe.apply(this,arguments)}function oe(){return oe=Object(Tt["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:1,n=s.length>1&&void 0!==s[1]?s[1]:10,a=s.length>2&&void 0!==s[2]?s[2]:-1,t.next=5,Ht.get("/api/blog",{params:{page:e,limit:n,categoryid:a}});case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),oe.apply(this,arguments)}function ce(){return le.apply(this,arguments)}function le(){return le=Object(Tt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.get("/api/blogtype");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)}))),le.apply(this,arguments)}function ue(t){return pe.apply(this,arguments)}function pe(){return pe=Object(Tt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.get("/api/blog/".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),pe.apply(this,arguments)}function de(t){return he.apply(this,arguments)}function he(){return he=Object(Tt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.post("/api/comment",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),he.apply(this,arguments)}function me(t){return ge.apply(this,arguments)}function ge(){return ge=Object(Tt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.get("/api/comment",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),ge.apply(this,arguments)}var fe={mixins:[Pt([])],computed:{routeInfo:function(){var t=+this.$route.params.categoryid||-1,e=+this.$route.query.page||1,n=+this.$route.query.limit||10;return{categoryid:t,page:e,limit:n}},datas:function(){var t=this,e=this.data.reduce((function(t,e){return t+e.articleCount}),0),n=[{articleCount:e,categoryid:-1,name:"全部"}].concat(Object(se["a"])(this.data));return n.map((function(e){return Object(ie["a"])(Object(ie["a"])({},e),{},{select:!!t.routeInfo.categoryid&&+e.id===t.routeInfo.categoryid})}))}},methods:{getBlogCategory:ce,fetchData:function(){return Object(Tt["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ce();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},handle:function(t){-1===t.id?this.$router.push({name:"Blog",query:{page:this.routeInfo.page,limit:this.routeInfo.limit}}):this.$router.push({name:"BlogCategory",query:{page:this.routeInfo.page,limit:this.routeInfo.limit},params:{categoryid:t.id}})}}},ve=fe,be=(n("5229"),Object(c["a"])(ve,ne,ae,!1,null,"fd176d34",null)),ye=be.exports,_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"blogcontainer",staticClass:"blog-list-container"},[t._l(t.data.rows,(function(e){return n("li",{key:e.id,ref:"itemList",refInFor:!0,staticClass:"blog-item"},[n("Lyout",{scopedSlots:t._u([{key:"left",fn:function(){return[n("router-link",{attrs:{to:{path:"/Blog/"+e.id}}},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.thumb,expression:"item.thumb"}],staticClass:"img",attrs:{alt:""}})])]},proxy:!0}],null,!0)},[n("div",{staticClass:"main"},[n("router-link",{attrs:{to:{path:"/Blog/"+e.id}}},[n("h2",[t._v(t._s(e.title))])]),n("div",{staticClass:"subtitle"},[n("span",[t._v("日期: "+t._s(t.formatDate(+e.createTime)))]),n("span",[t._v("浏览: "+t._s(e.scanNumber))]),n("span",[t._v("评论: "+t._s(e.commentNumber))]),n("span",[n("router-link",{attrs:{to:"/Blog/cate/"+e.category.id}},[t._v(" 分类: "+t._s(e.category?e.category.name:"未分类")+" ")])],1)]),n("div",{staticClass:"desc"},[t._v(" "+t._s(e.desc)+" ")])],1)])],1)})),t.data.total?n("Pager",{attrs:{total:+t.data.total,limitNum:t.routeInfo.limit,current:t.routeInfo.page},on:{changePage:t.changePage}}):t._e()],2)},we=[],xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.total>t.vessionNum?n("div",{staticClass:"pager-container"},[n("a",{class:{disable:1===t.current},on:{click:function(e){return t.handleClick(1)}}},[t._v("|<<")]),n("a",{class:{disable:1===t.current},on:{click:function(e){return t.handleClick(t.current-1)}}},[t._v("<<")]),t._l(t.pageVessionList,(function(e,a){return n("a",{key:a,class:{active:t.current===e},on:{click:function(n){return t.handleClick(e)}}},[t._v(t._s(e))])})),n("a",{class:{disable:t.current===Math.ceil(t.total/t.limitNum)},on:{click:function(e){return t.handleClick(t.current+1)}}},[t._v(">>")]),n("a",{class:{disable:t.current===Math.ceil(t.total/t.limitNum)},on:{click:function(e){t.handleClick(Math.ceil(t.total/t.limitNum))}}},[t._v(">>|")])],2):t._e()},je=[],Ce={props:{current:{type:Number,default:1},limitNum:{type:Number,default:10},total:{type:Number,required:!0},vessionNum:{type:Number,default:10}},computed:{minPage:function(){return this.current-Math.floor(this.vessionNum/2)<1?1:Math.ceil(this.current-this.vessionNum/2)},maxPage:function(){return this.minPage+this.vessionNum-1>Math.ceil(this.total/this.limitNum)?Math.ceil(this.total/this.limitNum):this.minPage+this.vessionNum-1},pageVessionList:function(){for(var t=[],e=this.minPage;e<this.maxPage+1;e+=1)t.push(e);return t}},methods:{handleClick:function(t){this.$emit("changePage",t)}}},ke=Ce,Se=(n("4e43"),Object(c["a"])(ke,xe,je,!1,null,"03727015",null)),$e=Se.exports,Oe=(n("4d90"),n("d3b7"),n("25f0"),function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Date(+t),a=(n.getMonth()+1).toString().padStart(2,"0"),i=n.getDate().toString().padStart(2,"0"),s="".concat(n.getFullYear(),"-").concat(a,"-").concat(i);if(e){var r=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0"),c=n.getSeconds().toString().padStart(2,"0");s+=" ".concat(r,":").concat(o,":").concat(c)}return s}),Le={mixins:[Pt({})],components:{Lyout:U,Pager:$e},methods:{getBlogList:re,formatDate:Oe,fetchData:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,re(t.routeInfo.page,t.routeInfo.limit,t.routeInfo.categoryid);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},changePage:function(t){t<1?this.current=1:t>Math.ceil(+this.data.total/this.routeInfo.limit)?this.current=Math.ceil(+this.data.total/this.routeInfo.limit):this.current=t,-1===this.routeInfo.categoryid?this.$router.push({name:"Blog",query:{page:this.current,limit:this.routeInfo.limit}}):this.$router.push({name:"BlogCategory",query:{page:this.current,limit:this.routeInfo.limit},params:{categoryid:this.routeInfo.categoryid}})},handle:function(){this.$bus.$emit("listScroll",this.$refs.itemList)}},mounted:function(){this.$refs.blogcontainer.addEventListener("scroll",this.handle)},beforedestroy:function(){this.$refs.blogcontainer.removeEventListener("scroll",this.handle)},watch:{$route:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.$refs.blogcontainer.scrollTop=0,e.next=4,t.fetchData();case 4:t.data=e.sent,t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}},computed:{routeInfo:function(){var t=+this.$route.params.categoryid||-1,e=+this.$route.query.page||1,n=+this.$route.query.limit||10;return{categoryid:t,page:e,limit:n}}}},Te=Le,Ie=(n("5a54"),Object(c["a"])(Te,_e,we,!1,null,"31890108",null)),De=Ie.exports,Re={components:{ListRight:ye,Lyout:U,BlogList:De},methods:{}},He=Re,Ae=(n("53cd"),Object(c["a"])(He,te,ee,!1,null,null,null)),Ee=Ae.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"but",staticClass:"message-container"},[n("FormMessage",{attrs:{formType:"留言板",subTitle:""+t.list.total,list:t.list.rows,isListLoading:t.isLoading},on:{submit:t.handleSubmit}})],1)},Ne=[],Me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isListLoading,expression:"isListLoading"}],staticClass:"form-message-container"},[n("FormContent",t._g({},t.$listeners)),n("div",{staticClass:"title"},[t._v(t._s(t.formType)+" "),n("span",[t._v("("+t._s(t.subTitle)+")")])]),n("FormList",{attrs:{list:t.list}}),n("div",{staticClass:"loading"})],1)},Be=[],ze=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"container",staticClass:"form-content-container"},[n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("div",{staticClass:"area-user"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.nick,expression:"formData.nick"}],attrs:{type:"text",placeholder:"用户昵称",maxlength:"10"},domProps:{value:t.formData.nick},on:{input:function(e){e.target.composing||t.$set(t.formData,"nick",e.target.value)}}}),n("span",{staticClass:"nick"},[t._v(t._s(t.formData.nick.length)+"/10")]),n("div",{staticClass:"err"},[t._v(t._s(t.formData.nickerr))])]),n("div",{staticClass:"area-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.content,expression:"formData.content"}],staticStyle:{resize:"none"},attrs:{placeholder:"输入内容",rows:"10"},domProps:{value:t.formData.content},on:{input:function(e){e.target.composing||t.$set(t.formData,"content",e.target.value)}}}),n("span",{staticClass:"content"},[t._v(t._s(t.formData.content.length)+"/300")]),n("div",{staticClass:"err"},[t._v(t._s(t.formData.contenterr))])]),n("button",{attrs:{type:"submit",disabled:t.isSubmit},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[t._v(" "+t._s(t.isSubmit?"提交中...":"提交")+" ")])])])},qe=[],Fe={data:function(){return{formData:{nick:"",content:"",nickerr:"",contenterr:""},isSubmit:!1}},methods:{handleSubmit:function(){var t=this;this.formData.nickerr=this.formData.nick?"":"昵称不能为空",this.formData.contenterr=this.formData.content?"":"内容不能为空",this.formData.nickerr||this.formData.contenterr||(this.isSubmit=!0,this.$emit("submit",this.formData,(function(){t.formData.nick="",t.formData.content="",t.isSubmit=!1,t.$message({content:"评论成功",duration:"2000",container:t.$refs.container,type:"success"})})))}}},We=Fe,Ge=(n("1ffe"),Object(c["a"])(We,ze,qe,!1,null,"5cc83172",null)),Ye=Ge.exports,Ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-list-container"},[n("ul",t._l(t.list,(function(e){return n("li",{key:e.id,staticClass:"list-item"},[n("div",{staticClass:"left"},[n("Avatar",{attrs:{url:e.avatar,size:30}})],1),n("div",{staticClass:"right"},[n("span",{staticClass:"nick"},[t._v(t._s(e.nickname))]),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),n("span",{staticClass:"time"},[t._v(" "+t._s(t.formatDate(e.createDate,!0))+" ")])])])})),0)])},Qe=[],Je={components:{Avatar:rt},props:["list"],methods:{formatDate:Oe}},Xe=Je,Ve=(n("6477"),Object(c["a"])(Xe,Ke,Qe,!1,null,"13ae7df2",null)),Ue=Ve.exports,Ze={components:{FormContent:Ye,FormList:Ue},props:{formType:{type:String,default:""},subTitle:{type:String,default:""},list:{type:Array,default:function(){return[]}},isListLoading:{type:Boolean,default:!1}}},tn=Ze,en=(n("1000"),Object(c["a"])(tn,Me,Be,!1,null,"8dc7f1da",null)),nn=en.exports;function an(){return sn.apply(this,arguments)}function sn(){return sn=Object(Tt["a"])(regeneratorRuntime.mark((function t(){var e,n,a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:10,t.next=4,Ht.get("/api/message",{params:{page:e,limit:n}});case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)}))),sn.apply(this,arguments)}function rn(t){return on.apply(this,arguments)}function on(){return on=Object(Tt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ht.post("/api/message",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),on.apply(this,arguments)}var cn={components:{FormMessage:nn},data:function(){return{list:{total:0,rows:[]},isLoading:!1,current:1,limit:10,page:1}},created:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,an();case 3:t.list=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},computed:{hasmore:function(){return this.list.total>this.list.rows.length}},mounted:function(){this.$refs.but.addEventListener("scroll",R(this.handleScroll,50))},beforeDestroyed:function(){this.$refs.but.removeEventListener("scroll",R(this.handleScroll,50))},methods:{handleSubmit:function(t,e){var n=this;return Object(Tt["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,rn(t);case 2:i=a.sent,n.list.rows.unshift(i),n.list.total+=1,e();case 6:case"end":return a.stop()}}),a)})))()},fetchMore:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasmore){e.next=2;break}return e.abrupt("return");case 2:return t.isLoading=!0,t.page+=1,e.next=6,an({params:{page:t.page,limit:10}});case 6:n=e.sent,t.list.total=n.total,t.list.rows=t.list.rows.concat(n.rows),t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},handleScroll:function(){Math.abs(this.$refs.but.scrollTop+this.$refs.but.clientHeight-this.$refs.but.scrollHeight)<100&&this.fetchMore()}}},ln=cn,un=(n("8a90"),Object(c["a"])(ln,Pe,Ne,!1,null,null,null)),pn=un.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog-container"},[n("Empty")],1)},hn=[],mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"empty-container"},[n("Icon",{attrs:{type:"empty"}}),n("p",[t._v(t._s(t.text))])],1)},gn=[],fn={props:{text:{type:String,default:"无数据"}},components:{Icon:u}},vn=fn,bn=(n("1d2e"),Object(c["a"])(vn,mn,gn,!1,null,"46a3c872",null)),yn=bn.exports,_n={components:{Empty:yn}},wn=_n,xn=(n("8394"),Object(c["a"])(wn,dn,hn,!1,null,null,null)),jn=xn.exports,Cn=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},kn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about-container"},[n("div",{staticClass:"list"},[n("div",{staticClass:"basic item"},[t._v("基本信息")]),n("div",{staticClass:"content"},[n("span",[t._v("姓名：张宁")]),n("span",[t._v(" 性别：男")]),n("span",[t._v("籍贯：山西临汾")]),n("span",[t._v(" 兴趣爱好：跑步、音乐、电影、变成")]),n("span",[t._v("目前所在地：深圳")])])]),n("div",{staticClass:"list"},[n("div",{staticClass:"skill item"},[t._v("个人技能")]),n("div",{staticClass:"content"},[n("span",[t._v("基础知识：HTML,CSS,JavaScritp，ES6,H5,CSS3")]),n("span",[t._v("前端工具：JQuery，Mock，lodash")]),n("span",[t._v("前端网络：http，ajax，axios")]),n("span",[t._v("组件库：vant，ant-design，element")]),n("span",[t._v("前端框架：vue")])])]),n("div",{staticClass:"list"},[n("div",{staticClass:"edu item"},[t._v("教育经历")]),n("div",{staticClass:"content"},[n("span",[t._v("2010-2021:曲阜师范大学")]),n("span",[t._v("2006-2009:山东英才学院")]),n("span",[t._v("2003-2006:临汾市县底高中")])])]),n("div",{staticClass:"list"},[n("div",{staticClass:"works item"},[t._v("工作经历")]),n("div",{staticClass:"content right"},[n("span",[t._v("2019-2021:深圳沃柏特科技有限公司")]),n("span",[t._v("2017-2019:南宁太和自在城")]),n("span",[t._v("2014-2016:好孝心健康生活馆")]),n("span",[t._v("2010-2014:养老项目销售专员")])])])])}],Sn=(n("6c64"),{}),$n=Object(c["a"])(Sn,Cn,kn,!1,null,"3f5077e8",null),On=$n.exports,Ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog-item-container"},[n("Lyout",{scopedSlots:t._u([{key:"right",fn:function(){return[n("div",{staticClass:"right"},[n("h2",[t._v("目录")]),n("TocList",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{tocList:t.data.toc},on:{changeToc:t.changeToc}})],1)]},proxy:!0}])},[n("div",{ref:"contentContainer",staticClass:"main"},[n("BlogContent",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{datas:t.data,loaded:t.isLoading}})],1)])],1)},Tn=[],In=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"blog-content-container"},[n("div",{staticClass:"blog"},[n("h2",[t._v(t._s(t.datas.title))]),n("div",{staticClass:"subtitle"},[n("span",[t._v("日期:"+t._s(t.datas.createDate?t.formatDate(+t.datas.createDate):""))]),n("span",[t._v("浏览:"+t._s(t.datas.scanNumber))]),n("a",{attrs:{href:"#article-md-title-7"}},[n("span",[t._v("评论:"+t._s(t.datas.commentNumber))])]),n("span",[t._v("分类:"+t._s(t.datas.category?t.datas.category.name:"未分类"))])]),n("div",{staticClass:"content",domProps:{innerHTML:t._s(t.datas.htmlContent)}})]),t.loaded?t._e():n("div",{staticClass:"comment"},[n("FormMessage",{ref:"comment",attrs:{formType:"评论列表",subTitle:""+t.data.total,list:t.data.rows,isListLoading:t.isLoading},on:{submit:t.handleSubmit}})],1)])},Dn=[],Rn=(n("2c43"),{mixins:[Pt({total:0,rows:[]})],props:["datas","loaded"],data:function(){return{commentOption:{page:1,limit:10,blogId:""}}},components:{FormMessage:nn},computed:{hasmore:function(){return this.data.total>this.data.rows.length}},created:function(){this.$bus.$on("mainscroll",this.handle)},destroyed:function(){this.$bus.$off("mainscroll",this.handle)},methods:{formatDate:Oe,fetchData:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me(t.commentOption);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},handleSubmit:function(t,e){var n=this;return Object(Tt["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,de(Object(ie["a"])({blogId:n.$route.params.id},t));case 2:i=a.sent,n.data.rows.unshift(i),n.data.total+=1,e();case 6:case"end":return a.stop()}}),a)})))()},fetchMore:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.hasmore){e.next=2;break}return e.abrupt("return");case 2:return t.isLoading=!0,t.page+=1,e.next=6,t.fetchData();case 6:n=e.sent,t.data.total=n.total,t.data.rows=t.data.rows.concat(n.rows),t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},handle:function(t){if(!this.isLoading&&t){var e=100,n=Math.abs(t.scrollTop+t.clientHeight-t.scrollHeight);n<e&&this.fetchMore()}}}}),Hn=Rn,An=(n("8cac"),Object(c["a"])(Hn,In,Dn,!1,null,"bb7bb708",null)),En=An.exports,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toc-list-container"},t._l(t.tocWithSelect,(function(e){return n("li",{key:e.id,staticClass:"list",class:{selected:e.selected},on:{click:function(n){return n.stopPropagation(),t.handle(e.anchor)}}},[t._v(" "+t._s(e.name)+" "),n("TocList",{attrs:{tocList:e.children},on:{changeToc:t.handle}})],1)})),0)},Nn=[],Mn=(n("18a5"),{name:"TocList",props:["tocList"],data:function(){return{currentAnch:""}},computed:{tocWithSelect:function(){var t=this,e=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.map((function(n){return Object(ie["a"])(Object(ie["a"])({},n),{},{selected:n.anchor===t.currentAnch,children:e(n.children)})}))};return e(this.tocList)},doms:function(){var t=[],e=function e(n){var a,i=Object(D["a"])(n);try{for(i.s();!(a=i.n()).done;){var s=a.value;t.push(document.getElementById(s.anchor)),s.children&&s.children.length>0&&e(s.children)}}catch(r){i.e(r)}finally{i.f()}return t};return e(this.tocList)}},methods:{handle:function(t){this.$emit("changeToc",t)},changeSelected:function(){this.currentAnch="";var t,e=Object(D["a"])(this.doms);try{for(e.s();!(t=e.n()).done;){var n=t.value;if(n){var a=n.getBoundingClientRect(),i=a.top;if(i>=0&&i<=150)return void(this.currentAnch=n.id);if(i>150)return;this.currentAnch=n.id}}}catch(s){e.e(s)}finally{e.f()}}},created:function(){this.sele=R(this.changeSelected,50),this.$bus.$on("mainscroll",this.sele)},destroyed:function(){this.$bus.$off("mainscroll",this.sele)}}),Bn=Mn,zn=(n("aff8"),Object(c["a"])(Bn,Pn,Nn,!1,null,"65f60861",null)),qn=zn.exports,Fn={components:{Lyout:U,TocList:qn,BlogContent:En},mixins:[Pt({})],methods:{fetchData:function(){var t=this;return Object(Tt["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ue(t.$route.params.id);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))()},changeToc:function(t){window.location.hash=t},handleScroll:function(){this.$bus.$emit("mainscroll",this.$refs.contentContainer)},scrollInit:function(t){this.$refs.contentContainer.scrollTop=t}},updated:function(){var t=window.location.hash;window.location.hash="",setTimeout((function(){window.location.hash=t}),50)},mounted:function(){this.$refs.contentContainer.addEventListener("scroll",this.handleScroll)},created:function(){this.$bus.$on("changescroll",this.scrollInit)},beforeDestroy:function(){this.$refs.contentContainer.removeEventListener("scroll",this.handleScroll),this.$bus.$off("changescroll",this.scrollInit)},computed:{}},Wn=Fn,Gn=(n("1cb1"),Object(c["a"])(Wn,Ln,Tn,!1,null,"2611ed53",null)),Yn=Gn.exports;p["a"].use($t["a"]);var Kn=[{name:"Home",path:"/",component:Zt,meta:{title:"首页"}},{name:"Blog",path:"/Blog",component:Ee,meta:{title:"博客"}},{name:"BlogItem",path:"/Blog/:id",component:Yn,meta:{title:"博客详情"}},{name:"BlogCategory",path:"/Blog/cate/:categoryid",component:Ee,meta:{title:"博客分类"}},{name:"Project",path:"/Project",component:jn,meta:{title:"项目"}},{name:"Message",path:"/Message",component:pn,meta:{title:"留言板"}},{name:"About",path:"/About",component:On,meta:{title:"关于"}}],Qn=new $t["a"]({routes:Kn});Qn.afterEach((function(t){t.meta.title&&(document.title=t.meta.title)}));var Jn=Qn,Xn=n("2f62");p["a"].use(Xn["a"]);var Vn=new Xn["a"].Store({state:{},mutations:{},actions:{},modules:{}});n("788f");p["a"].prototype.$message=v,p["a"].directive("loading",I),p["a"].directive("lazy",N),new p["a"]({router:Jn,store:Vn,render:function(t){return t(St)}}).$mount("#app")},"5a54":function(t,e,n){"use strict";n("46c1")},6477:function(t,e,n){"use strict";n("b9f6")},"6c64":function(t,e,n){"use strict";n("81ec")},"71ba":function(t,e,n){},"75c4":function(t,e,n){},"75fb":function(t,e,n){},"788f":function(t,e,n){},"78a8":function(t,e,n){},"7f41":function(t,e,n){},"801d":function(t,e,n){},"810d":function(t,e,n){"use strict";n("7f41")},"81ec":function(t,e,n){},8394:function(t,e,n){"use strict";n("801d")},"86ef":function(t,e,n){},8773:function(t,e,n){},"8a90":function(t,e,n){"use strict";n("391e")},"8cac":function(t,e,n){"use strict";n("324e")},"915e":function(t,e,n){t.exports=n.p+"img/avatar.5810bb15.jpg"},9170:function(t,e,n){},"92d2":function(t,e,n){},"97cf":function(t,e,n){"use strict";n("78a8")},9865:function(t,e,n){"use strict";n("0502")},"98b7":function(t,e,n){"use strict";n("75fb")},"9ecd":function(t,e,n){"use strict";n("2c5f")},aff8:function(t,e,n){"use strict";n("e0a9")},b055:function(t,e,n){t.exports=n.p+"img/loading.db6b6428.gif"},b539:function(t,e,n){},b873:function(t,e,n){"use strict";n("71ba")},b9f6:function(t,e,n){},cbf7:function(t,e,n){},dd53:function(t,e,n){t.exports={"self-fill-f":"message-module_self-fill-f_1nPxO",message:"message-module_message_1ZcIf","message-info":"message-module_message-info_1iouP","message-success":"message-module_message-success_1V2a3","message-error":"message-module_message-error_3Xpy7",icon:"message-module_icon_IbK6h"}},e0a9:function(t,e,n){},e0c1:function(t,e,n){},e0c4:function(t,e,n){"use strict";n("8773")},e660:function(t,e,n){t.exports=n.p+"img/wechat.a0b3962a.jpg"},e6cf:function(t,e,n){}});
//# sourceMappingURL=app.49ea6023.js.map